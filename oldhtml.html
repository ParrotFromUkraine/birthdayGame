<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kira's Birthday Adventure</title>
    <style>
        body {
            background-color: #000;
            color: #0f0;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }
        
        #gameContainer {
            width: 800px;
            height: 600px;
            border: 2px solid #0f0;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        #terminalOutput {
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px;
            border: 1px solid #333;
            margin-bottom: 10px;
            height: 500px;
        }
        
        #storyHint {
            margin-bottom: 10px;
            padding: 5px;
            background-color: #111;
            border-left: 3px solid #0f0;
        }
        
        #terminalInput {
            background-color: #000;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 8px;
            font-family: 'Courier New', monospace;
            outline: none;
        }
        
        #blackScreen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            color: #0f0;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            z-index: 100;
        }
        
        .easter-egg {
            color: #ff0;
            margin: 5px 0;
        }
        
        #title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
            color: #f0f;
        }
        
        #credits {
            margin-top: 10px;
            font-size: 12px;
            text-align: right;
            color: #555;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="title">Kira's Birthday Adventure</div>
        <div id="storyHint"></div>
        <div id="terminalOutput"></div>
        <input type="text" id="terminalInput" autofocus>
        <div id="credits">Created with ‚ù§Ô∏è by ParrotFromUkraine</div>
    </div>
    
    <div id="blackScreen">
        <div id="loadingText"></div>
    </div>

    <script>
        const steamId = {
          parrotFromUkraine: '',
          yamma: '',
          toniket: '',
          ukraineAccount: ''
        };

        const present = {
          mafin: '–ó –¥–Ω–µ–º –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è –ö—ñ—Ä–∞, –±–∞–∂–∞—é —Ç–æ–±—ñ —â–∞—Å—Ç—è, –∑–¥–æ—Ä–æ–≤ º—è, —É—Å–ø—ñ—Ö—ñ–≤ –≤ –∂–∏—Ç—Ç—ñ . –•–æ—á—É —â–æ–± –≤ —Ü–µ–π –¥–µ–Ω—å —É —Ç–µ–±–µ –±—É–ª–∞ —Ç—ñ–ª—å–∫–∏ –ø–æ—Å–º—ñ—à–∫–∞ —Ç–∞ —Ä–∞–¥—ñ—Å—Ç—å –Ω–∞ –æ–±–ª–∏—á—á—ñ ü•≥ü•≥ü•≥',
          limon: '–¢—É—Ç –¥–æ–ª–∂–Ω–æ –±—ã–ª–æ –±—ã—Ç—å –ø–æ–∑–¥—Ä–∞–≤–µ–ª–Ω–∏—è((',
          parrot: '–ö–∏—Ä–æ—á–∫–∞))\n–° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è, —Å–æ–ª–Ω—ã—à–∫–æ!\n–ü—É—Å—Ç—å –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å –≤—Å—ë –≤–æ–∫—Ä—É–≥ —Å–∏—è–µ—Ç –¥–ª—è —Ç–µ–±—è: —É–ª—ã–±–∫–∏, —Ü–≤–µ—Ç—ã, —Å–ª–æ–≤–∞.\n–¢—ã ‚Äî –Ω–∞—Å—Ç–æ—è—â–µ–µ —á—É–¥–æ, –∏ —è –±–µ–∑—É–º–Ω–æ —Ä–∞–¥, —á—Ç–æ —Ç—ã –µ—Å—Ç—å –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏.ü•π\n–ñ–µ–ª–∞—é —Ç–µ–±–µ —Å—á–∞—Å—Ç—å—è, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –≤ –º—É–∑—ã–∫–µ –∏ –≤–æ–ª—à–µ–±–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.\n–¢–≤–æ–π –ø–µ—Ä–Ω–∞—Ç—ã–π –∏–∑ –£–∫—Ä–∞–∏–Ω—ã)))ü¶ú‚ù§Ô∏èüòò',
          yamma: '–¢—É—Ç –¥–æ–ª–∂–Ω–æ –±—ã–ª–æ –±—ã—Ç—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è((',
          toniked: '–¢—É—Ç –¥–æ–ª–∂–Ω–æ –±—ã–ª–æ –±—ã—Ç—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è((',
          luka: '–ü–∏—Å—å–º–æ –∫–∏—Ä–∞ –ø—Ä–∏–≤–µ—Ç —è  –ª—É–∫–∞ —è –æ—á–µ–Ω—å –¥—É–º–∞–ª –∏ –≤—Å–ø–æ–º–Ω–∏–ª —É—Ç–µ–±—è –¥–µ–Ω—å —Ä–∞–∂–¥–µ–Ω–∏—è ! –ø–∞–∑–¥—Ä–∞–≤–ª—è—é —Ç–µ–±—è –∫–∏—Ä–∞ - @luka',
          stalker: '–¢—É—Ç –¥–æ–ª–∂–Ω–æ –±—ã–ª–æ –±—ã—Ç—å –ø–æ–∑–¥—Ä–∞–≤–µ–ª–Ω–∏—è((',
          katana_lk: '–ì–æ–ª–æ–≤–æ–π –ø–æ —á–∞—â–µ –¥—É–º–∞–π... –±–æ–ª—å—à–µ –Ω–µ—á–µ–≥–æ —Å–∫–∞–∑–∞—Ç—å...', // –î–æ—Å–ª–æ–≤–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞
          secret: '–°–µ–∫—Ä–µ—Ç–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ: –¢—ã —Å–∞–º–∞—è –ª—É—á—à–∞—è –ö–∏—Ä–æ—á–∫–∞ –Ω–∞ —Å–≤–µ—Ç–µ! üíñ'
        }


        const easterEggs = [
          { trigger: "sudo love me baby", response: "–í—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ø—É–≥–∞—è. –û–Ω –æ–±–Ω—è–ª –≤–∞—Å –∫—Ä—ã–ª—å—è–º–∏." },
          { trigger: "sudo rm sandwich", response: "–°–µ–Ω–¥–≤–∏—á–∏ —É–¥–∞–ª–µ–Ω—ã. –ü–æ–ø—É–≥–∞–π –≤ —è—Ä–æ—Å—Ç–∏." },
          { trigger: "42", response: "–û—Ç–≤–µ—Ç –Ω–∞ –≥–ª–∞–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å –∂–∏–∑–Ω–∏, –≤—Å–µ–ª–µ–Ω–Ω–æ–π –∏ –≤—Å–µ–≥–æ —Ç–∞–∫–æ–≥–æ..." },
          { trigger: "mafin", response: present.mafin },
          { trigger: "yamma", response: present.yamma },
          { trigger: "parrot", response: `Parrot sign in\n\n${present.parrot}\n\n–¢–≤–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –∏–∑ –£–∫—Ä–∞–∏–Ω—ã\n\nParrot sign out` },
          { trigger: 'limon', response: present.limon },
          { trigger: 'toniked', response: present.toniked },
          { trigger: 'luka', response: present.luka },
          { trigger: 'stalker', response: present.stalker },
          { trigger: 'katana', response: present.katana_lk },
          { trigger: 'secret', response: present.secret },
          { trigger: 'happy birthday', response: '–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è, –ö–∏—Ä–æ—á–∫–∞! üéÇüéâ' },
          { trigger: 'i love you', response: '–Ø —Ç–æ–∂–µ —Ç–µ–±—è –ª—é–±–ª—é! ‚ù§Ô∏è' },
          { trigger: 'popugai', response: 'ü¶ú –ö—Ä—è! ü¶ú' }
        ];

        let currentStepId = 'start';

        const storyHint = document.getElementById('storyHint');
        const terminalOutput = document.getElementById('terminalOutput');
        const terminalInput = document.getElementById('terminalInput');
        const gameContainer = document.getElementById('gameContainer');
        const blackScreen = document.getElementById('blackScreen');
        const loadingText = document.getElementById('loadingText');

        function getStepById(id) {
          return storySteps.find(step => step.id === id);
        }

        function updateHint() {
          const step = getStepById(currentStepId);
          storyHint.textContent = step?.hint || "–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í–≤–µ–¥–∏—Ç–µ 'restart' —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ.";
        }

        function triggerWipeSequence() {
          gameContainer.style.display = 'none';
          blackScreen.style.display = 'flex';
          loadingText.textContent = "–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤...";

          setTimeout(() => loadingText.textContent = "–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä—É—à–µ–Ω–∞...", 2000);
          setTimeout(() => loadingText.textContent = "–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞...", 4000);
          setTimeout(() => loadingText.textContent = "–ü—Ä–∏–≤–µ—Ç, –ö–∏—Ä–∞!", 6000);

          setTimeout(() => {
            terminalOutput.innerHTML = "";
            currentStepId = 'start';
            updateHint();
            blackScreen.style.display = 'none';
            gameContainer.style.display = 'block';
            terminalInput.focus();
          }, 8000);
        }

        function normalize(str) {
          return str.toLowerCase().trim().replace(/\s+/g, ' ');
        }

        terminalInput.addEventListener('keydown', function (e) {
          if (e.key === 'Enter') {
            const userInput = terminalInput.value.trim();
            terminalOutput.innerHTML += `<div>&gt; ${userInput}</div>`;

            if (userInput === "sudo rm -rf /") {
              triggerWipeSequence();
              terminalInput.value = '';
              return;
            }

            const egg = easterEggs.find(e => normalize(e.trigger) === normalize(userInput));
            if (egg) {
              terminalOutput.innerHTML += `<div class="easter-egg">${egg.response}</div>`;
            } else {
              const currentStep = getStepById(currentStepId);
              const match = currentStep?.branches?.find(branch => normalize(branch.answer) === normalize(userInput));


              if (match) {
                if (match.response) terminalOutput.innerHTML += `<div>${match.response}</div>`;
                if (match.next) {
                  currentStepId = match.next;
                  const nextStep = getStepById(currentStepId);
                  if (nextStep?.response) {
                    terminalOutput.innerHTML += `<div>${nextStep.response}</div>`;
                  }
                  updateHint();
                }
              } else {
                terminalOutput.innerHTML += `<div>–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.</div>`;
              }
            }

            terminalInput.value = '';
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
          }
        });

        // Initialize the game
        updateHint();
        terminalInput.focus();

        // Show initial step response if exists
        const initialStep = getStepById(currentStepId);
        if (initialStep?.response) {
          terminalOutput.innerHTML += `<div>${initialStep.response}</div>`;
        }
    </script>
</body>
</html>
